<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å® å‹åœˆ - å…»å® ç»éªŒåˆ†äº«ç¤¾åŒº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --dark: #2C3E50;
            --light: #F7F9FC;
            --gray: #95A5A6;
            --success: #2ECC71;
            --warning: #F39C12;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: var(--light);
            color: var(--dark);
            min-height: 100vh;
            padding-bottom: 60px;
        }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .header {
            background: white;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo::before {
            content: "ğŸ¾";
            font-size: 24px;
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .search-icon, .notification-icon {
            font-size: 20px;
            color: var(--gray);
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .search-icon:hover, .notification-icon:hover {
            color: var(--primary);
        }
        
        /* åˆ†ç±»æ ‡ç­¾ */
        .category-tabs {
            background: white;
            padding: 10px 15px;
            display: flex;
            gap: 12px;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            border-bottom: 1px solid #eee;
        }
        
        .category-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .tab {
            padding: 6px 16px;
            background: var(--light);
            border-radius: 20px;
            font-size: 14px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            padding: 15px;
        }
        
        /* å‘å¸–å…¥å£ */
        .post-entry {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .post-entry:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .post-entry-text {
            color: var(--gray);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .post-entry-text::before {
            content: "âœï¸";
            font-size: 18px;
        }
        
        /* å¸–å­å¡ç‰‡ */
        .post-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .post-card:active {
            transform: scale(0.98);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
        }
        
        .post-info {
            flex: 1;
        }
        
        .username {
            font-weight: 600;
            font-size: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .badge {
            background: var(--warning);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: normal;
        }
        
        .post-time {
            font-size: 12px;
            color: var(--gray);
            margin-top: 2px;
        }
        
        .post-content {
            margin-bottom: 12px;
        }
        
        .post-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        .post-text {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
        }
        
        .post-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }
        
        .post-image {
            width: 100%;
            padding-bottom: 100%;
            background: #f0f0f0;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        
        .post-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .post-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        
        .tag {
            background: #E8F4F3;
            color: var(--secondary);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
        }
        
        .post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            color: var(--gray);
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .action-btn:hover {
            color: var(--primary);
        }
        
        .action-btn.liked {
            color: var(--primary);
        }
        
        /* åº•éƒ¨å¯¼èˆª */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 4px 20px;
            cursor: pointer;
            transition: color 0.3s;
            color: var(--gray);
            position: relative;
        }
        
        .nav-item .badge-dot {
            position: absolute;
            top: 2px;
            right: 18px;
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-icon {
            font-size: 20px;
        }
        
        .nav-text {
            font-size: 11px;
        }
        
        /* æµ®åŠ¨å‘å¸–æŒ‰é’® */
        .fab {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(255, 107, 107, 0.4);
            cursor: pointer;
            z-index: 99;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(255, 107, 107, 0.6);
        }
        
        .fab:active {
            transform: scale(0.95);
        }
        
        /* å¼¹å‡ºå±‚ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 200;
            animation: fadeIn 0.3s;
        }
        
        .modal.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .modal-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .close-btn {
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            color: var(--dark);
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-input, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .category-select {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .category-option {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .category-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .submit-btn:active {
            transform: scale(0.98);
        }
        
        /* ä¸“å®¶æ ‡è¯† */
        .expert-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--gray);
        }
        
        .loading::after {
            content: "...";
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: "."; }
            40% { content: ".."; }
            60%, 100% { content: "..."; }
        }
        
        /* ç¾¤èŠæ ·å¼ */
        .chat-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #F7F9FC;
            z-index: 300;
            flex-direction: column;
        }
        
        .chat-container.active {
            display: flex;
        }
        
        .chat-header {
            background: white;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .chat-back {
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        
        .chat-title {
            flex: 1;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
        }
        
        .chat-info {
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        
        .chat-groups {
            background: white;
            padding: 10px 15px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            border-bottom: 1px solid #eee;
        }
        
        .chat-groups::-webkit-scrollbar {
            display: none;
        }
        
        .group-tab {
            padding: 8px 16px;
            background: var(--light);
            border-radius: 20px;
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
            position: relative;
        }
        
        .group-tab.active {
            background: var(--primary);
            color: white;
        }
        
        .group-tab .member-count {
            font-size: 11px;
            opacity: 0.8;
            margin-left: 4px;
        }
        
        .group-tab .unread {
            position: absolute;
            top: -4px;
            right: -4px;
            background: red;
            color: white;
            font-size: 10px;
            padding: 2px 5px;
            border-radius: 10px;
            min-width: 16px;
            text-align: center;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .message {
            display: flex;
            gap: 10px;
            animation: messageSlide 0.3s;
        }
        
        @keyframes messageSlide {
            from { 
                opacity: 0;
                transform: translateY(10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message.own {
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .message-content {
            max-width: 70%;
        }
        
        .message-bubble {
            background: white;
            padding: 10px 14px;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: relative;
        }
        
        .message.own .message-bubble {
            background: var(--primary);
            color: white;
        }
        
        .message-text {
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
        }
        
        .message-time {
            font-size: 11px;
            color: var(--gray);
            margin-top: 4px;
        }
        
        .message.own .message-time {
            color: rgba(255,255,255,0.8);
            text-align: right;
        }
        
        .message-name {
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 4px;
            font-weight: 500;
        }
        
        .system-message {
            text-align: center;
            font-size: 12px;
            color: var(--gray);
            padding: 8px;
            background: rgba(0,0,0,0.05);
            border-radius: 20px;
            margin: 10px auto;
        }
        
        .chat-input-container {
            background: white;
            padding: 10px 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .chat-input:focus {
            border-color: var(--primary);
        }
        
        .chat-send {
            width: 36px;
            height: 36px;
            background: var(--primary);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }
        
        .chat-send:active {
            transform: scale(0.9);
        }
        
        .chat-plus {
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 10px 14px;
            background: white;
            border-radius: 12px;
            width: fit-content;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--gray);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.5;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }
        
        .group-list-modal {
            padding: 20px;
        }
        
        .group-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .group-card:active {
            transform: scale(0.98);
        }
        
        .group-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .group-info {
            flex: 1;
            margin-left: 15px;
        }
        
        .group-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .group-desc {
            font-size: 12px;
            color: var(--gray);
        }
        
        .join-btn {
            padding: 8px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="header">
        <div class="logo">å® å‹åœˆ</div>
        <div class="header-actions">
            <span class="search-icon">ğŸ”</span>
            <span class="notification-icon">ğŸ””</span>
        </div>
    </div>
    
    <!-- åˆ†ç±»æ ‡ç­¾ -->
    <div class="category-tabs">
        <div class="tab active" data-category="all">å…¨éƒ¨</div>
        <div class="tab" data-category="dog">ğŸ• ç‹—ç‹—</div>
        <div class="tab" data-category="cat">ğŸ± çŒ«çŒ«</div>
        <div class="tab" data-category="health">ğŸ’Š å¥åº·</div>
        <div class="tab" data-category="food">ğŸ– é¥®é£Ÿ</div>
        <div class="tab" data-category="behavior">ğŸ¾ è¡Œä¸º</div>
        <div class="tab" data-category="save">ğŸ’° çœé’±</div>
    </div>
    
    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="content">
        <!-- å‘å¸–å…¥å£ -->
        <div class="post-entry" onclick="showPostModal()">
            <div class="post-entry-text">åˆ†äº«ä½ çš„å…»å® ç»éªŒï¼Œå¸®åŠ©æ›´å¤šå® å‹...</div>
        </div>
        
        <!-- å¸–å­åˆ—è¡¨ -->
        <div id="postList">
            <!-- ç¤ºä¾‹å¸–å­1 -->
            <div class="post-card">
                <div class="post-header">
                    <div class="avatar">ç‹</div>
                    <div class="post-info">
                        <div class="username">
                            ç‹é˜¿å§¨
                            <span class="badge">èµ„æ·±é“²å±å®˜</span>
                        </div>
                        <div class="post-time">2å°æ—¶å‰</div>
                    </div>
                </div>
                <div class="post-content">
                    <div class="post-title">è€å¹´çŠ¬å…³èŠ‚ä¿å…»ï¼Œä¸ç”¨ä¹°è´µçš„ä¿å¥å“ï¼</div>
                    <div class="post-text">æˆ‘å®¶é‡‘æ¯›ä»Šå¹´12å²äº†ï¼Œä¹‹å‰å…³èŠ‚ä¸€ç›´ä¸å¥½ï¼Œå® ç‰©åŒ»é™¢æ¨èçš„ä¿å¥å“ä¸€ä¸ªæœˆè¦800å¤šã€‚åæ¥ç¾¤é‡Œçš„æœ‹å‹æ¨èäº†ä¸€ä¸ªé…æ–¹ï¼šé±¼æ²¹+æ°¨ç³–+é’™ç‰‡ï¼ŒæŸå®ä¸Šä¹°ä¸€ä¸ªæœˆæ‰100å¤šï¼Œæ•ˆæœç‰¹åˆ«å¥½...</div>
                    <div class="post-tags">
                        <span class="tag">#è€å¹´çŠ¬</span>
                        <span class="tag">#çœé’±å¦™æ‹›</span>
                        <span class="tag">#å…³èŠ‚ä¿å…»</span>
                    </div>
                </div>
                <div class="post-actions">
                    <span class="action-btn liked">â¤ï¸ 256</span>
                    <span class="action-btn">ğŸ’¬ 45</span>
                    <span class="action-btn">ğŸ“¤ åˆ†äº«</span>
                    <span class="action-btn">â­ æ”¶è—</span>
                </div>
            </div>
            
            <!-- ç¤ºä¾‹å¸–å­2 -->
            <div class="post-card">
                <div class="post-header">
                    <div class="avatar" style="background: linear-gradient(135deg, #667eea, #764ba2);">æ</div>
                    <div class="post-info">
                        <div class="username">
                            æåŒ»ç”Ÿ
                            <span class="expert-badge">è®¤è¯å…½åŒ»</span>
                        </div>
                        <div class="post-time">5å°æ—¶å‰</div>
                    </div>
                </div>
                <div class="post-content">
                    <div class="post-title">çŒ«å’ªè½¯ä¾¿ä¸ä¸€å®šè¦å»åŒ»é™¢ï¼Œè¯•è¯•è¿™ä¸ªæ–¹æ³•</div>
                    <div class="post-text">æœ€è¿‘å¾ˆå¤šæœ‹å‹é—®çŒ«å’ªè½¯ä¾¿æ€ä¹ˆåŠã€‚å…¶å®å¤§éƒ¨åˆ†æƒ…å†µæ˜¯è‚ èƒƒæ•æ„Ÿå¯¼è‡´çš„ï¼Œå¯ä»¥å…ˆè¯•è¯•ï¼š1.ç¦é£Ÿ12å°æ—¶ 2.å–‚ç›Šç”ŸèŒï¼ˆæ¨èå¸ƒæ‹‰è¿ªï¼‰ 3.æ¢æˆè‚ èƒƒæ•æ„Ÿç²®ã€‚å¦‚æœ3å¤©æ²¡æ”¹å–„å†å°±åŒ»...</div>
                    <div class="post-images">
                        <div class="post-image">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f0f0f0' width='100' height='100'/%3E%3Ctext x='50' y='50' text-anchor='middle' dy='.3em' fill='%23999' font-size='16'%3Eå›¾ç‰‡1%3C/text%3E%3C/svg%3E" alt="ç¤ºä¾‹å›¾ç‰‡">
                        </div>
                        <div class="post-image">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%23f0f0f0' width='100' height='100'/%3E%3Ctext x='50' y='50' text-anchor='middle' dy='.3em' fill='%23999' font-size='16'%3Eå›¾ç‰‡2%3C/text%3E%3C/svg%3E" alt="ç¤ºä¾‹å›¾ç‰‡">
                        </div>
                    </div>
                    <div class="post-tags">
                        <span class="tag">#çŒ«å’ªå¥åº·</span>
                        <span class="tag">#ä¸“ä¸šå»ºè®®</span>
                    </div>
                </div>
                <div class="post-actions">
                    <span class="action-btn">â¤ï¸ 892</span>
                    <span class="action-btn">ğŸ’¬ 127</span>
                    <span class="action-btn">ğŸ“¤ åˆ†äº«</span>
                    <span class="action-btn">â­ æ”¶è—</span>
                </div>
            </div>
            
            <!-- ç¤ºä¾‹å¸–å­3 -->
            <div class="post-card">
                <div class="post-header">
                    <div class="avatar" style="background: linear-gradient(135deg, #f093fb, #f5576c);">å°</div>
                    <div class="post-info">
                        <div class="username">å°ç¾å¦ˆå¦ˆ</div>
                        <div class="post-time">æ˜¨å¤©</div>
                    </div>
                </div>
                <div class="post-content">
                    <div class="post-title">æ±‚åŠ©ï¼šæŸ´çŠ¬æ‰æ¯›ä¸¥é‡æ€ä¹ˆåŠï¼Ÿ</div>
                    <div class="post-text">æˆ‘å®¶æŸ´çŠ¬æœ€è¿‘æ‰æ¯›ç‰¹åˆ«å‰å®³ï¼Œæ¯å¤©æ¢³éƒ½èƒ½æ¢³ä¸‹ä¸€å¤§æŠŠï¼Œå®¶é‡Œåˆ°å¤„éƒ½æ˜¯æ¯›ã€‚å·²ç»æ¢äº†å¥½å‡ ç§ç‹—ç²®äº†ï¼Œä¹Ÿåƒäº†ç¾æ¯›ç²‰ï¼Œä½†æ˜¯æ•ˆæœä¸æ˜æ˜¾ã€‚è¯·é—®å¤§å®¶æœ‰ä»€ä¹ˆå¥½åŠæ³•å—ï¼Ÿ</div>
                    <div class="post-tags">
                        <span class="tag">#æ±‚åŠ©</span>
                        <span class="tag">#æ‰æ¯›</span>
                        <span class="tag">#æŸ´çŠ¬</span>
                    </div>
                </div>
                <div class="post-actions">
                    <span class="action-btn">â¤ï¸ 23</span>
                    <span class="action-btn">ğŸ’¬ 67</span>
                    <span class="action-btn">ğŸ“¤ åˆ†äº«</span>
                    <span class="action-btn">â­ æ”¶è—</span>
                </div>
            </div>
        </div>
        
        <div class="loading">åŠ è½½æ›´å¤šå†…å®¹</div>
    </div>
    
    <!-- åº•éƒ¨å¯¼èˆª -->
    <div class="bottom-nav">
        <div class="nav-item active">
            <span class="nav-icon">ğŸ </span>
            <span class="nav-text">é¦–é¡µ</span>
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ”¥</span>
            <span class="nav-text">çƒ­é—¨</span>
        </div>
        <div class="nav-item" onclick="openChatGroups()">
            <span class="nav-icon">ğŸ’¬</span>
            <span class="nav-text">ç¾¤èŠ</span>
            <span class="badge-dot"></span>
        </div>
        <div class="nav-item">
            <span class="nav-icon">â“</span>
            <span class="nav-text">é—®ç­”</span>
        </div>
        <div class="nav-item">
            <span class="nav-icon">ğŸ‘¤</span>
            <span class="nav-text">æˆ‘çš„</span>
        </div>
    </div>
    
    <!-- æµ®åŠ¨å‘å¸–æŒ‰é’® -->
    <div class="fab" onclick="showPostModal()">+</div>
    
    <!-- ç¾¤èŠç•Œé¢ -->
    <div id="chatContainer" class="chat-container">
        <div class="chat-header">
            <span class="chat-back" onclick="closeChat()">â†</span>
            <div class="chat-title">ç‹—ç‹—å¥åº·äº¤æµç¾¤</div>
            <span class="chat-info">â„¹ï¸</span>
        </div>
        
        <div class="chat-groups">
            <div class="group-tab active" data-group="dog-health">
                ğŸ¥ ç‹—ç‹—å¥åº·
                <span class="member-count">(234)</span>
            </div>
            <div class="group-tab" data-group="cat-daily">
                ğŸ˜º çŒ«å’ªæ—¥å¸¸
                <span class="member-count">(189)</span>
                <span class="unread">3</span>
            </div>
            <div class="group-tab" data-group="save-money">
                ğŸ’° çœé’±å¦™æ‹›
                <span class="member-count">(456)</span>
            </div>
            <div class="group-tab" data-group="newbie">
                ğŸŒ± æ–°æ‰‹æ‘
                <span class="member-count">(678)</span>
            </div>
            <div class="group-tab" data-group="senior">
                ğŸ‘´ è€å¹´å® ç‰©
                <span class="member-count">(123)</span>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="system-message">æ¬¢è¿æ¥åˆ°ç‹—ç‹—å¥åº·äº¤æµç¾¤ ğŸ‘‹</div>
            
            <div class="message">
                <div class="message-avatar">ç‹</div>
                <div class="message-content">
                    <div class="message-name">ç‹é˜¿å§¨</div>
                    <div class="message-bubble">
                        <div class="message-text">å¤§å®¶å¥½ï¼æˆ‘å®¶é‡‘æ¯›æœ€è¿‘æ‰æ¯›ç‰¹åˆ«å‰å®³ï¼Œæœ‰ä»€ä¹ˆå¥½åŠæ³•å—ï¼Ÿ</div>
                    </div>
                    <div class="message-time">10:23</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-avatar" style="background: linear-gradient(135deg, #667eea, #764ba2);">æ</div>
                <div class="message-content">
                    <div class="message-name">æåŒ»ç”Ÿ <span class="expert-badge">è®¤è¯å…½åŒ»</span></div>
                    <div class="message-bubble">
                        <div class="message-text">æ˜¥å­£æ˜¯æ¢æ¯›æœŸï¼Œå»ºè®®ï¼š1.æ¯å¤©æ¢³æ¯› 2.è¡¥å……é±¼æ²¹ 3.æ£€æŸ¥æ˜¯å¦æœ‰çš®è‚¤é—®é¢˜</div>
                    </div>
                    <div class="message-time">10:25</div>
                </div>
            </div>
            
            <div class="message">
                <div class="message-avatar" style="background: linear-gradient(135deg, #f093fb, #f5576c);">å¼ </div>
                <div class="message-content">
                    <div class="message-name">å¼ å§</div>
                    <div class="message-bubble">
                        <div class="message-text">æˆ‘å®¶çš„ä¹Ÿæ˜¯ï¼æ¯å¤©æ¢³æ¯›èƒ½æ¢³ä¸‹ä¸€å¤§æŠŠ ğŸ˜­</div>
                    </div>
                    <div class="message-time">10:26</div>
                </div>
            </div>
            
            <div class="system-message">å°æ˜åŠ å…¥äº†ç¾¤èŠ</div>
            
            <div class="message">
                <div class="message-avatar">æ˜</div>
                <div class="message-content">
                    <div class="message-name">å°æ˜</div>
                    <div class="message-bubble">
                        <div class="message-text">æ–°äººæŠ¥é“ï¼è¯·é—®ç‹—ç‹—ç–«è‹—ä¸€èˆ¬å¤šä¹…æ‰“ä¸€æ¬¡ï¼Ÿ</div>
                    </div>
                    <div class="message-time">10:30</div>
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <span class="chat-plus">âŠ•</span>
            <input type="text" class="chat-input" id="chatInput" placeholder="è¾“å…¥æ¶ˆæ¯...">
            <button class="chat-send" onclick="sendMessage()">â¤</button>
        </div>
    </div>
    
    <!-- ç¾¤ç»„åˆ—è¡¨å¼¹çª— -->
    <div id="groupListModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">åŠ å…¥ç¾¤èŠ</h3>
                <span class="close-btn" onclick="hideGroupListModal()">Ã—</span>
            </div>
            
            <div class="group-list-modal">
                <div class="group-card" onclick="joinGroup('dog-health')">
                    <div class="group-icon">ğŸ¥</div>
                    <div class="group-info">
                        <div class="group-name">ç‹—ç‹—å¥åº·äº¤æµç¾¤</div>
                        <div class="group-desc">åˆ†äº«ç‹—ç‹—å¥åº·çŸ¥è¯†ï¼Œæœ‰è®¤è¯å…½åŒ»åœ¨çº¿ç­”ç–‘</div>
                    </div>
                    <button class="join-btn">åŠ å…¥</button>
                </div>
                
                <div class="group-card" onclick="joinGroup('cat-daily')">
                    <div class="group-icon">ğŸ˜º</div>
                    <div class="group-info">
                        <div class="group-name">çŒ«å’ªæ—¥å¸¸åˆ†äº«</div>
                        <div class="group-desc">çŒ«å¥´èšé›†åœ°ï¼Œåˆ†äº«ä¸»å­çš„å¯çˆ±æ—¥å¸¸</div>
                    </div>
                    <button class="join-btn">åŠ å…¥</button>
                </div>
                
                <div class="group-card" onclick="joinGroup('save-money')">
                    <div class="group-icon">ğŸ’°</div>
                    <div class="group-info">
                        <div class="group-name">çœé’±å¦™æ‹›ç¾¤</div>
                        <div class="group-desc">å›¢è´­ã€ä¼˜æƒ ä¿¡æ¯ï¼Œå…»å® çœé’±ç§˜ç±</div>
                    </div>
                    <button class="join-btn">åŠ å…¥</button>
                </div>
                
                <div class="group-card" onclick="joinGroup('newbie')">
                    <div class="group-icon">ğŸŒ±</div>
                    <div class="group-info">
                        <div class="group-name">æ–°æ‰‹æ‘</div>
                        <div class="group-desc">æ–°æ‰‹å…»å® äº¤æµï¼Œè€å¸æœºå¸¦è·¯</div>
                    </div>
                    <button class="join-btn">åŠ å…¥</button>
                </div>
                
                <div class="group-card" onclick="joinGroup('senior')">
                    <div class="group-icon">ğŸ‘´</div>
                    <div class="group-info">
                        <div class="group-name">è€å¹´å® ç‰©æŠ¤ç†</div>
                        <div class="group-desc">å…³çˆ±è€å¹´å® ç‰©ï¼Œåˆ†äº«æŠ¤ç†ç»éªŒ</div>
                    </div>
                    <button class="join-btn">åŠ å…¥</button>
                </div>
                
                <div class="group-card" onclick="joinGroup('emergency')">
                    <div class="group-icon">ğŸš¨</div>
                    <div class="group-info">
                        <div class="group-name">ç´§æ€¥æ±‚åŠ©ç¾¤</div>
                        <div class="group-desc">24å°æ—¶åœ¨çº¿ï¼Œå® ç‰©ç´§æ€¥æƒ…å†µäº’åŠ©</div>
                    </div>
                    <button class="join-btn">åŠ å…¥</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å‘å¸–å¼¹çª— -->
    <div id="postModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">å‘å¸ƒå¸–å­</h3>
                <span class="close-btn" onclick="hidePostModal()">Ã—</span>
            </div>
            
            <div class="form-group">
                <label class="form-label">æ ‡é¢˜</label>
                <input type="text" class="form-input" id="postTitle" placeholder="ä¸€å¥è¯è¯´æ˜ä½ çš„åˆ†äº«æˆ–é—®é¢˜">
            </div>
            
            <div class="form-group">
                <label class="form-label">å†…å®¹</label>
                <textarea class="form-textarea" id="postContent" placeholder="è¯¦ç»†æè¿°ä½ çš„ç»éªŒæˆ–é—®é¢˜..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">é€‰æ‹©åˆ†ç±»</label>
                <div class="category-select">
                    <div class="category-option" data-value="dog">ğŸ• ç‹—ç‹—</div>
                    <div class="category-option" data-value="cat">ğŸ± çŒ«çŒ«</div>
                    <div class="category-option" data-value="health">ğŸ’Š å¥åº·</div>
                    <div class="category-option" data-value="food">ğŸ– é¥®é£Ÿ</div>
                    <div class="category-option" data-value="behavior">ğŸ¾ è¡Œä¸º</div>
                    <div class="category-option" data-value="save">ğŸ’° çœé’±</div>
                </div>
            </div>
            
            <button class="submit-btn" onclick="submitPost()">å‘å¸ƒ</button>
        </div>
    </div>
    
    <script>
        // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
        let currentUser = {
            name: 'å® å‹',
            avatar: 'å® ',
            isLoggedIn: false
        };
        
        // æ¨¡æ‹Ÿå¸–å­æ•°æ®
        let posts = [];
        
        // æ˜¾ç¤ºå‘å¸–å¼¹çª—
        function showPostModal() {
            if (!currentUser.isLoggedIn) {
                if (confirm('éœ€è¦å…ˆç™»å½•æ‰èƒ½å‘å¸–ï¼Œæ˜¯å¦ä½¿ç”¨å¾®ä¿¡ç™»å½•ï¼Ÿ')) {
                    simulateWechatLogin();
                }
                return;
            }
            document.getElementById('postModal').classList.add('active');
        }
        
        // éšè—å‘å¸–å¼¹çª—
        function hidePostModal() {
            document.getElementById('postModal').classList.remove('active');
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.querySelectorAll('.category-option').forEach(opt => {
                opt.classList.remove('selected');
            });
        }
        
        // æ¨¡æ‹Ÿå¾®ä¿¡ç™»å½•
        function simulateWechatLogin() {
            currentUser = {
                name: 'æ–°ç”¨æˆ·' + Math.floor(Math.random() * 1000),
                avatar: 'æ–°',
                isLoggedIn: true
            };
            alert('ç™»å½•æˆåŠŸï¼');
            showPostModal();
        }
        
        // åˆ†ç±»é€‰æ‹©
        document.querySelectorAll('.category-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.category-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });
        
        // åˆ†ç±»æ ‡ç­¾åˆ‡æ¢
        document.querySelectorAll('.category-tabs .tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.category-tabs .tab').forEach(t => {
                    t.classList.remove('active');
                });
                this.classList.add('active');
                filterPosts(this.dataset.category);
            });
        });
        
        // ç­›é€‰å¸–å­
        function filterPosts(category) {
            console.log('ç­›é€‰åˆ†ç±»ï¼š', category);
        }
        
        // æäº¤å¸–å­
        function submitPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const selectedCategory = document.querySelector('.category-option.selected');
            
            if (!title || !content) {
                alert('è¯·å¡«å†™æ ‡é¢˜å’Œå†…å®¹');
                return;
            }
            
            if (!selectedCategory) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªåˆ†ç±»');
                return;
            }
            
            const newPost = {
                id: Date.now(),
                title: title,
                content: content,
                category: selectedCategory.dataset.value,
                author: currentUser.name,
                avatar: currentUser.avatar,
                time: 'åˆšåˆš',
                likes: 0,
                comments: 0,
                tags: generateTags(selectedCategory.dataset.value)
            };
            
            addPostToList(newPost);
            hidePostModal();
            alert('å‘å¸ƒæˆåŠŸï¼');
        }
        
        // ç”Ÿæˆæ ‡ç­¾
        function generateTags(category) {
            const tagMap = {
                dog: ['#ç‹—ç‹—æ—¥å¸¸', '#é“²å±å®˜'],
                cat: ['#çŒ«çŒ«æ—¥å¸¸', '#çŒ«å¥´'],
                health: ['#å¥åº·å’¨è¯¢', '#åŒ»ç–—å»ºè®®'],
                food: ['#é¥®é£Ÿæ¨è', '#è¥å…»æ­é…'],
                behavior: ['#è¡Œä¸ºè®­ç»ƒ', '#ä¹ æƒ¯åŸ¹å…»'],
                save: ['#çœé’±å¦™æ‹›', '#æ€§ä»·æ¯”']
            };
            return tagMap[category] || ['#å® ç‰©'];
        }
        
        // æ·»åŠ å¸–å­åˆ°åˆ—è¡¨
        function addPostToList(post) {
            const postHTML = `
                <div class="post-card">
                    <div class="post-header">
                        <div class="avatar">${post.avatar}</div>
                        <div class="post-info">
                            <div class="username">${post.author}</div>
                            <div class="post-time">${post.time}</div>
                        </div>
                    </div>
                    <div class="post-content">
                        <div class="post-title">${post.title}</div>
                        <div class="post-text">${post.content}</div>
                        <div class="post-tags">
                            ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <div class="post-actions">
                        <span class="action-btn">â¤ï¸ ${post.likes}</span>
                        <span class="action-btn">ğŸ’¬ ${post.comments}</span>
                        <span class="action-btn">ğŸ“¤ åˆ†äº«</span>
                        <span class="action-btn">â­ æ”¶è—</span>
                    </div>
                </div>
            `;
            
            const postList = document.getElementById('postList');
            const postEntry = document.querySelector('.post-entry');
            postList.insertAdjacentHTML('afterbegin', postHTML);
        }
        
        // å¤„ç†ç‚¹èµç­‰äº¤äº’
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('action-btn') && e.target.textContent.includes('â¤ï¸')) {
                e.target.classList.toggle('liked');
                let likesText = e.target.textContent;
                let likesCount = parseInt(likesText.match(/\d+/) || 0);
                if (e.target.classList.contains('liked')) {
                    likesCount++;
                } else {
                    likesCount--;
                }
                e.target.textContent = `â¤ï¸ ${likesCount}`;
            }
            
            if (e.target.classList.contains('action-btn') && e.target.textContent.includes('ğŸ“¤')) {
                if (navigator.share) {
                    navigator.share({
                        title: 'å® å‹åœˆ - å…»å® ç»éªŒåˆ†äº«',
                        text: 'æˆ‘åœ¨å® å‹åœˆå‘ç°äº†å¾ˆå¤šå®ç”¨çš„å…»å® ç»éªŒï¼Œå¿«æ¥çœ‹çœ‹ï¼',
                        url: window.location.href
                    });
                } else {
                    alert('ç‚¹å‡»å³ä¸Šè§’åˆ†äº«ç»™æœ‹å‹å§ï¼');
                }
            }
            
            if (e.target.classList.contains('action-btn') && e.target.textContent.includes('â­')) {
                e.target.classList.toggle('liked');
                if (e.target.classList.contains('liked')) {
                    e.target.textContent = 'â­ å·²æ”¶è—';
                } else {
                    e.target.textContent = 'â­ æ”¶è—';
                }
            }
        });
        
        // åº•éƒ¨å¯¼èˆªåˆ‡æ¢
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                this.classList.add('active');
                const navText = this.querySelector('.nav-text').textContent;
                handleNavigation(navText);
            });
        });
        
        // å¤„ç†å¯¼èˆª
        function handleNavigation(page) {
            const content = document.querySelector('.content');
            
            switch(page) {
                case 'çƒ­é—¨':
                    loadHotPosts();
                    break;
                case 'ç¾¤èŠ':
                    openChatGroups();
                    break;
                case 'é—®ç­”':
                    loadQAPosts();
                    break;
                case 'æˆ‘çš„':
                    loadUserProfile();
                    break;
                default:
                    location.reload();
            }
        }
        
        // æ‰“å¼€ç¾¤èŠåˆ—è¡¨
        function openChatGroups() {
            if (!currentUser.isLoggedIn) {
                if (confirm('éœ€è¦å…ˆç™»å½•æ‰èƒ½åŠ å…¥ç¾¤èŠï¼Œæ˜¯å¦ä½¿ç”¨å¾®ä¿¡ç™»å½•ï¼Ÿ')) {
                    simulateWechatLogin();
                }
                return;
            }
            document.getElementById('groupListModal').classList.add('active');
        }
        
        // éšè—ç¾¤ç»„åˆ—è¡¨
        function hideGroupListModal() {
            document.getElementById('groupListModal').classList.remove('active');
        }
        
        // åŠ å…¥ç¾¤ç»„å¹¶æ‰“å¼€èŠå¤©
        function joinGroup(groupId) {
            hideGroupListModal();
            openChat(groupId);
        }
        
        // æ‰“å¼€èŠå¤©ç•Œé¢
        function openChat(groupId) {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.classList.add('active');
            
            const groupNames = {
                'dog-health': 'ç‹—ç‹—å¥åº·äº¤æµç¾¤',
                'cat-daily': 'çŒ«å’ªæ—¥å¸¸åˆ†äº«',
                'save-money': 'çœé’±å¦™æ‹›ç¾¤',
                'newbie': 'æ–°æ‰‹æ‘',
                'senior': 'è€å¹´å® ç‰©æŠ¤ç†',
                'emergency': 'ç´§æ€¥æ±‚åŠ©ç¾¤'
            };
            
            document.querySelector('.chat-title').textContent = groupNames[groupId] || 'ç¾¤èŠ';
            
            const badgeDot = document.querySelector('.badge-dot');
            if (badgeDot) badgeDot.remove();
            
            setTimeout(() => {
                const messages = document.getElementById('chatMessages');
                messages.scrollTop = messages.scrollHeight;
            }, 100);
        }
        
        // å…³é—­èŠå¤©ç•Œé¢
        function closeChat() {
            document.getElementById('chatContainer').classList.remove('active');
        }
        
        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const messageText = input.value.trim();
            
            if (!messageText) return;
            
            const messagesContainer = document.getElementById('chatMessages');
            
            const messageHTML = `
                <div class="message own">
                    <div class="message-avatar">${currentUser.avatar}</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            <div class="message-text">${messageText}</div>
                        </div>
                        <div class="message-time">${new Date().toLocaleTimeString('zh-CN', {hour: '2-digit', minute: '2-digit'})}</div>
                    </div>
                </div>
            `;
            
            messagesContainer.insertAdjacentHTML('beforeend', messageHTML);
            input.value = '';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            setTimeout(() => {
                simulateReply(messageText);
            }, 1000 + Math.random() * 2000);
        }
        
        // æ¨¡æ‹Ÿå…¶ä»–ç”¨æˆ·å›å¤
        function simulateReply(userMessage) {
            const replies = [
                { name: 'æåŒ»ç”Ÿ', avatar: 'æ', text: 'è¿™ä¸ªé—®é¢˜å¾ˆå¸¸è§ï¼Œæˆ‘æ¥è§£ç­”ä¸€ä¸‹...', style: 'background: linear-gradient(135deg, #667eea, #764ba2);' },
                { name: 'ç‹é˜¿å§¨', avatar: 'ç‹', text: 'æˆ‘ä¹‹å‰ä¹Ÿé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼' },
                { name: 'å°ç¾', avatar: 'ç¾', text: 'åŒé—®ï¼ŒæœŸå¾…å¤§ä½¬è§£ç­” ğŸ™' },
                { name: 'å¼ å§', avatar: 'å¼ ', text: 'æˆ‘æœ‰ä¸ªåœŸæ–¹æ³•ï¼Œç‰¹åˆ«ç®¡ç”¨ï¼', style: 'background: linear-gradient(135deg, #f093fb, #f5576c);' },
                { name: 'è€é™ˆ', avatar: 'é™ˆ', text: 'å»ºè®®å»åŒ»é™¢æ£€æŸ¥ä¸€ä¸‹æ¯”è¾ƒä¿é™©' }
            ];
            
            const reply = replies[Math.floor(Math.random() * replies.length)];
            const messagesContainer = document.getElementById('chatMessages');
            
            const typingHTML = `
                <div class="message" id="typing-message">
                    <div class="message-avatar" ${reply.style ? `style="${reply.style}"` : ''}>${reply.avatar}</div>
                    <div class="message-content">
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            
            messagesContainer.insertAdjacentHTML('beforeend', typingHTML);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            setTimeout(() => {
                const typingMessage = document.getElementById('typing-message');
                if (typingMessage) typingMessage.remove();
                
                const replyHTML = `
                    <div class="message">
                        <div class="message-avatar" ${reply.style ? `style="${reply.style}"` : ''}>${reply.avatar}</div>
                        <div class="message-content">
                            <div class="message-name">${reply.name}</div>
                            <div class="message-bubble">
                                <div class="message-text">${reply.text}</div>
                            </div>
                            <div class="message-time">${new Date().toLocaleTimeString('zh-CN', {hour: '2-digit', minute: '2-digit'})}</div>
                        </div>
                    </div>
                `;
                
                messagesContainer.insertAdjacentHTML('beforeend', replyHTML);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
        }
        
        // ç¾¤ç»„åˆ‡æ¢
        document.querySelectorAll('.group-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.group-tab').forEach(t => {
                    t.classList.remove('active');
                });
                this.classList.add('active');
                
                const unread = this.querySelector('.unread');
                if (unread) {
                    unread.remove();
                }
                
                const groupName = this.textContent.trim().split('(')[0];
                document.querySelector('.chat-title').textContent = groupName;
                
                loadGroupMessages(this.dataset.group);
            });
        });
        
        // åŠ è½½ç¾¤ç»„æ¶ˆæ¯
        function loadGroupMessages(groupId) {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = `<div class="system-message">æ¬¢è¿æ¥åˆ°${document.querySelector('.chat-title').textContent} ğŸ‘‹</div>`;
            
            if (groupId === 'cat-daily') {
                messagesContainer.innerHTML += `
                    <div class="message">
                        <div class="message-avatar">çŒ«</div>
                        <div class="message-content">
                            <div class="message-name">çŒ«å¥´ä¸€å·</div>
                            <div class="message-bubble">
                                <div class="message-text">çœ‹çœ‹æˆ‘å®¶ä¸»å­ä»Šå¤©çš„ç¡å§¿ ğŸ˜‚</div>
                            </div>
                            <div class="message-time">09:15</div>
                        </div>
                    </div>
                `;
            } else if (groupId === 'save-money') {
                messagesContainer.innerHTML += `
                    <div class="message">
                        <div class="message-avatar">å›¢</div>
                        <div class="message-content">
                            <div class="message-name">å›¢é•¿</div>
                            <div class="message-bubble">
                                <div class="message-text">æŸå®ç‹—ç²®å›¢è´­å¼€å§‹äº†ï¼æ¯”å¹³æ—¶ä¾¿å®œ30%ï¼</div>
                            </div>
                            <div class="message-time">14:20</div>
                        </div>
                    </div>
                `;
            }
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // ç›‘å¬å›è½¦å‘é€æ¶ˆæ¯
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // æ¨¡æ‹Ÿæ¥æ”¶æ–°æ¶ˆæ¯é€šçŸ¥
        setInterval(() => {
            if (Math.random() > 0.9 && !document.getElementById('chatContainer').classList.contains('active')) {
                const navItem = document.querySelector('.nav-item:nth-child(3)');
                if (!navItem.querySelector('.badge-dot')) {
                    const dot = document.createElement('span');
                    dot.className = 'badge-dot';
                    navItem.appendChild(dot);
                }
            }
        }, 10000);
        
        // åŠ è½½çƒ­é—¨å¸–å­
        function loadHotPosts() {
            const content = document.querySelector('.content');
            content.innerHTML = `
                <div style="padding: 20px; text-align: center;">
                    <h3 style="margin-bottom: 20px;">ğŸ”¥ ä»Šæ—¥çƒ­é—¨</h3>
                    <div class="post-card">
                        <div class="post-header">
                            <div class="avatar" style="background: linear-gradient(135deg, #667eea, #764ba2);">æ</div>
                            <div class="post-info">
                                <div class="username">
                                    æåŒ»ç”Ÿ
                                    <span class="expert-badge">è®¤è¯å…½åŒ»</span>
                                </div>
                                <div class="post-time">ç½®é¡¶</div>
                            </div>
                        </div>
                        <div class="post-content">
                            <div class="post-title">ã€å¿…çœ‹ã€‘æ–°æ‰‹å…»å® é¿å‘æŒ‡å—TOP10</div>
                            <div class="post-text">æ€»ç»“äº†10ä¸ªæ–°æ‰‹æœ€å®¹æ˜“è¸©çš„å‘ï¼ŒåŒ…æ‹¬ç–«è‹—ã€é©±è™«ã€é¥®é£Ÿç­‰æ–¹é¢...</div>
                            <div class="post-tags">
                                <span class="tag">#æ–°æ‰‹å¿…çœ‹</span>
                                <span class="tag">#é¿å‘æŒ‡å—</span>
                            </div>
                        </div>
                        <div class="post-actions">
                            <span class="action-btn liked">â¤ï¸ 5.2k</span>
                            <span class="action-btn">ğŸ’¬ 892</span>
                            <span class="action-btn">ğŸ“¤ åˆ†äº«</span>
                            <span class="action-btn">â­ æ”¶è—</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // åŠ è½½é—®ç­”æ¿å—
        function loadQAPosts() {
            const content = document.querySelector('.content');
            content.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="margin-bottom: 20px; text-align: center;">ğŸ’¬ é—®ç­”ä¸“åŒº</h3>
                    <div style="background: #FFF3E0; padding: 12px; border-radius: 8px; margin-bottom: 20px;">
                        <p style="font-size: 14px; color: #E65100;">
                            ğŸ† å›ç­”é—®é¢˜å¯è·å¾—ç§¯åˆ†ï¼Œç§¯åˆ†å¯ç”¨äºå‘ä¸“å®¶æé—®
                        </p>
                    </div>
                    <div class="post-card">
                        <div class="post-header">
                            <div class="avatar">æ€¥</div>
                            <div class="post-info">
                                <div class="username">æ€¥æ€¥æ€¥</div>
                                <div class="post-time">10åˆ†é’Ÿå‰</div>
                            </div>
                        </div>
                        <div class="post-content">
                            <div class="post-title">ç‹—ç‹—çªç„¶ä¸åƒä¸œè¥¿æ€ä¹ˆåŠï¼Ÿåœ¨çº¿ç­‰ï¼</div>
                            <div class="post-text">ä»Šå¤©æ—©ä¸Šå¼€å§‹å°±ä¸åƒä¸œè¥¿äº†ï¼Œç²¾ç¥è¿˜å¯ä»¥...</div>
                            <div class="post-tags">
                                <span class="tag" style="background: #FFEBEE; color: #D32F2F;">#ç´§æ€¥</span>
                            </div>
                        </div>
                        <div class="post-actions">
                            <span class="action-btn">ğŸ’¬ å¿«é€Ÿå›ç­”</span>
                            <span class="action-btn">ğŸ‘ï¸ 234</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // åŠ è½½ç”¨æˆ·èµ„æ–™
        function loadUserProfile() {
            const content = document.querySelector('.content');
            
            if (!currentUser.isLoggedIn) {
                content.innerHTML = `
                    <div style="padding: 40px; text-align: center;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ¾</div>
                        <h3 style="margin-bottom: 20px;">åŠ å…¥å® å‹åœˆ</h3>
                        <p style="color: #666; margin-bottom: 30px;">ç™»å½•åå³å¯å‘å¸–ã€è¯„è®ºã€æ”¶è—</p>
                        <button class="submit-btn" onclick="simulateWechatLogin()" style="width: 200px; margin: 0 auto;">
                            å¾®ä¿¡ä¸€é”®ç™»å½•
                        </button>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div style="padding: 20px;">
                        <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
                            <div class="avatar" style="width: 80px; height: 80px; font-size: 32px; margin: 0 auto 15px;">
                                ${currentUser.avatar}
                            </div>
                            <h3>${currentUser.name}</h3>
                            <p style="color: #666; margin-top: 10px;">æ–°æ‰‹é“²å±å®˜</p>
                            <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                                <div>
                                    <div style="font-size: 20px; font-weight: bold;">0</div>
                                    <div style="font-size: 12px; color: #666;">å‘å¸–</div>
                                </div>
                                <div>
                                    <div style="font-size: 20px; font-weight: bold;">0</div>
                                    <div style="font-size: 12px; color: #666;">æ”¶è—</div>
                                </div>
                                <div>
                                    <div style="font-size: 20px; font-weight: bold;">10</div>
                                    <div style="font-size: 12px; color: #666;">ç§¯åˆ†</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: white; border-radius: 12px; padding: 15px;">
                            <div style="padding: 12px 0; border-bottom: 1px solid #f0f0f0;">
                                <span style="margin-right: 10px;">ğŸ“</span> æˆ‘çš„å¸–å­
                            </div>
                            <div style="padding: 12px 0; border-bottom: 1px solid #f0f0f0;">
                                <span style="margin-right: 10px;">â­</span> æˆ‘çš„æ”¶è—
                            </div>
                            <div style="padding: 12px 0; border-bottom: 1px solid #f0f0f0;">
                                <span style="margin-right: 10px;">ğŸ†</span> ç§¯åˆ†æ˜ç»†
                            </div>
                            <div style="padding: 12px 0;">
                                <span style="margin-right: 10px;">âš™ï¸</span> è®¾ç½®
                            </div>
                        </div>
                    </div>
                `;
            }
        }
        
        // æ¨¡æ‹Ÿä¸‹æ‹‰åˆ·æ–°
        let startY = 0;
        let isPulling = false;
        
        document.addEventListener('touchstart', function(e) {
            if (window.scrollY === 0) {
                startY = e.touches[0].clientY;
                isPulling = true;
            }
        });
        
        document.addEventListener('touchmove', function(e) {
            if (!isPulling) return;
            
            const currentY = e.touches[0].clientY;
            const pullDistance = currentY - startY;
            
            if (pullDistance > 100) {
                document.body.style.transform = `translateY(${Math.min(pullDistance * 0.5, 80)}px)`;
            }
        });
        
        document.addEventListener('touchend', function(e) {
            if (!isPulling) return;
            
            document.body.style.transition = 'transform 0.3s';
            document.body.style.transform = 'translateY(0)';
            
            setTimeout(() => {
                document.body.style.transition = '';
            }, 300);
            
            isPulling = false;
        });
        
        // æ¨¡æ‹Ÿæ— é™æ»šåŠ¨åŠ è½½
        window.addEventListener('scroll', function() {
            if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {
                console.log('åŠ è½½æ›´å¤š...');
            }
        });
    </script>

<!-- MVP localStorage + åˆ†ç±»ç­›é€‰ è¡¥ä¸ï¼ˆä¸æ”¹åŸç»“æ„ï¼Œå¯éšæ—¶åˆ é™¤ï¼‰ -->
<script>
(function() {
  const STORAGE_KEY = 'mvp_posts';
  let persisted = [];

  function readStorage() {
    try { persisted = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]'); }
    catch (e) { persisted = []; }
  }
  function writeStorage() {
    try { localStorage.setItem(STORAGE_KEY, JSON.stringify(persisted)); } catch(e){}
  }

  // ä¿å­˜ä¸€ä»½åŸå‡½æ•°
  const originalAddPostToList = window.addPostToList;

  // åŒ…è£… addPostToListï¼šæ¸²æŸ“ + ä¿å­˜
  window.addPostToList = function(post, opts) {
    // å°½é‡è¡¥é½åˆ†ç±»å­—æ®µ
    try {
      if (!post.category) {
        const sel = document.querySelector('.category-option.selected');
        const val = sel?.dataset?.value || sel?.textContent || 'å…¶ä»–';
        post.category = (val || '').trim();
      }
    } catch(e){}
    if (typeof originalAddPostToList === 'function') {
      originalAddPostToList(post);
    }
    // è·³è¿‡ä¿å­˜ï¼ˆä¾‹å¦‚ä»æœ¬åœ°æ¢å¤æ—¶ï¼‰
    if (opts && opts.skipSave) return;
    try {
      persisted.push(post);
      writeStorage();
    } catch(e){}
  };

  // é‡å†™ filterPostsï¼šæŒ‰åˆ†ç±»é‡æ¸²æŸ“
  window.filterPosts = function(category) {
    try {
      const list = document.getElementById('postList');
      if (!list) return;
      list.innerHTML = '';
      const selected = (!category || category === 'all') ? persisted : persisted.filter(p => (p.category||'').trim() === category);
      selected.forEach(p => {
        if (typeof originalAddPostToList === 'function') {
          originalAddPostToList(p);
        }
      });
    } catch(e){ console.warn('filterPosts error', e); }
  };

  // é¡µé¢åŠ è½½ï¼šè¯»å–å¹¶æ¢å¤å¸–å­
  document.addEventListener('DOMContentLoaded', function() {
    readStorage();
    if (persisted.length) {
      const list = document.getElementById('postList');
      if (list) list.innerHTML = '';
      persisted.forEach(p => {
        if (typeof originalAddPostToList === 'function') {
          originalAddPostToList(p);
        }
      });
    }
  });

  // æ¸…ç©ºæœ¬åœ°æ•°æ®çš„å°å·¥å…·ï¼ˆå¯é€‰ï¼‰
  window.__clearLocalPosts = function() {
    localStorage.removeItem(STORAGE_KEY);
    alert('å·²æ¸…ç©ºæœ¬åœ°å¸–å­ï¼Œä¸‹æ¬¡åˆ·æ–°åæ¢å¤ä¸ºç©º');
  };
})();
</script>

</body>
</html>
